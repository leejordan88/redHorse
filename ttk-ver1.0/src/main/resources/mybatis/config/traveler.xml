<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="traveler">

<resultMap type="travelerVO" id="travelerRM">
		<result property="placeVO.categoryName" column="categoryname" />
		<result property="placeVO.areaName" column="areaname" />
		<result property="placeVO.placeName" column="placeName" />
	</resultMap>

<!-- 핫플레이스 랭킹5  -->
<select id="hotPlaceRankingList" resultMap="travelerRM" >
	<![CDATA[
	select areaname, categoryname, placeName, placeNo, rank from(
	select p.areaname, p.categoryname, p.placeName, t.placeNo, rank() over(order by count(t.id) desc) as rank
	from traveler t, place p
	where p.placeNo=t.placeNo 
	group by p.areaname, p.categoryname, p.placeName, t.placeNo) where rank<=5
	]]>
</select> 

</mapper>